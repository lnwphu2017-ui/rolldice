<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dice Roller</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        body { font-family: sans-serif; text-align: center; margin-top: 50px; }
        #result { font-size: 50px; margin: 20px; font-weight: bold; }
        button { padding: 10px 20px; font-size: 20px; cursor: pointer; }
    </style>
</head>
<body>

    <h1>‡∏ó‡∏≠‡∏¢‡∏•‡∏π‡∏Å‡πÄ‡∏ï‡πã‡∏≤ üé≤</h1>
    <div id="result">-</div>
    <button onclick="rollDice()">‡∏Å‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ó‡∏≠‡∏¢!</button>

    <script>
        // 1. ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Supabase Client
        const supabaseUrl = '‡πÉ‡∏™‡πà_SUPABASE_URL_‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà'
        const supabaseKey = '‡πÉ‡∏™‡πà_SUPABASE_ANON_KEY_‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà'
        const _supabase = supabase.createClient(supabaseUrl, supabaseKey)

        async function rollDice() {
            // 2. ‡∏™‡∏∏‡πà‡∏°‡πÄ‡∏•‡∏Ç 1-6
            const number = Math.floor(Math.random() * 6) + 1;
            
            // 3. ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö
            document.getElementById('result').innerText = number;

            // 4. ‡∏™‡πà‡∏á‡∏Ñ‡πà‡∏≤‡πÑ‡∏õ‡πÄ‡∏Å‡πá‡∏ö‡πÉ‡∏ô Supabase
            const { error } = await _supabase
                .from('rolls') // ‡∏ä‡∏∑‡πà‡∏≠‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏™‡∏£‡πâ‡∏≤‡∏á
                .insert({ number: number })
            
            if (error) {
                console.error('Error saving roll:', error)
                alert('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‡πÅ‡∏ï‡πà‡∏ó‡∏≠‡∏¢‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏Ç: ' + number)
            } else {
                console.log('Saved to DB!')
            }
        }
    </script>
</body>
</html>