<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dice Roller</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        body { 
            font-family: sans-serif; 
            text-align: center; 
            margin-top: 50px; 
            background-color: #f0f2f5;
        }
        /* ปรับขนาดรูปลูกเต๋า */
        #dice-img { 
            width: 150px; 
            height: 150px; 
            margin: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        button { 
            padding: 12px 24px; 
            font-size: 18px; 
            cursor: pointer; 
            background-color: #3b82f6; 
            color: white; 
            border: none; 
            border-radius: 5px; 
        }
        button:hover { background-color: #2563eb; }
    </style>
</head>
<body>

    <h1>ทอยลูกเต๋า </h1>
    
    <img id="dice-img" src="dice1.png" alt="Dice">
    
    <br><br>
    <button onclick="rollDice()">ทอยเลย!</button>

    <script>
        const supabaseUrl = 'https://sydjvhhmdxvinbcjfecg.supabase.co' 
        const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InN5ZGp2aGhtZHh2aW5iY2pmZWNnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njg3MTQ5OTYsImV4cCI6MjA4NDI5MDk5Nn0.ZFsu0cW0EVNMKpYyEiN_MHPWFmzhnw9loBWjuOpcFY4' 
        const _supabase = supabase.createClient(supabaseUrl, supabaseKey, {
  auth: {
    persistSession: false // สั่งว่าไม่ต้องจำ Session (แก้ปัญหา Tracking Prevention)
  }
})

        async function rollDice() {
           
            const number = Math.floor(Math.random() * 6) + 1;
            
            
            const imgElement = document.getElementById('dice-img');
            imgElement.src = 'dice' + number + '.png'; 

            
            imgElement.animate([
                { transform: 'rotate(0deg) scale(1)' },
                { transform: 'rotate(360deg) scale(1.2)' },
                { transform: 'rotate(0deg) scale(1)' }
            ], { duration: 500 });

          
            const { error } = await _supabase
                .from('rolls')
                .insert({ number: number })
            
            if (error) console.error('Error:', error)
        }
    </script>
</body>
</html>